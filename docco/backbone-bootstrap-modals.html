<!DOCTYPE html>

<html>
<head>
  <title>backbone-bootstrap-modals.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>backbone-bootstrap-modals.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*!
  backbone-bootstrap-modals 0.1.2
  http://github.com/leafygreen/backbone-bootstrap-modals

  Licensed under the MIT license.
*/</span>

(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(root, factory)</span> {</span>

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">"function"</span> &amp;&amp; define.amd) {</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>AMD (+ global for extensions)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    define([<span class="hljs-string">"underscore"</span>, <span class="hljs-string">"backbone"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(_, Backbone)</span> {</span>
      <span class="hljs-keyword">return</span> (root.BackboneBootstrapModals = factory(_, Backbone));
    });
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> exports === <span class="hljs-string">"object"</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>CommonJS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    module.exports = factory(<span class="hljs-built_in">require</span>(<span class="hljs-string">"underscore"</span>), <span class="hljs-built_in">require</span>(<span class="hljs-string">"backbone"</span>));
  } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Browser</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    root.BackboneBootstrapModals = factory(root._, root.Backbone);
  }}(<span class="hljs-keyword">this</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(_, Backbone)</span> {</span>
<span class="hljs-pi">
  "use strict"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Create Project Namespace</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> BackboneBootstrapModals = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h2 id="baseheaderview">BaseHeaderView</h2>

            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>A simple view representing the modal title and dismiss icon.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
BackboneBootstrapModals.BaseHeaderView = Backbone.View.extend({
  className: <span class="hljs-string">'modal-header'</span>,

  initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(opts)</span> {</span>
    <span class="hljs-keyword">var</span> options = opts || {};
    <span class="hljs-keyword">this</span>.label = options.label || <span class="hljs-string">''</span>;
    <span class="hljs-keyword">this</span>.labelId = options.labelId || <span class="hljs-string">'myModalLabel'</span>;
    <span class="hljs-keyword">this</span>.labelTagName = options.labelTagName || <span class="hljs-string">'h4'</span>;
    <span class="hljs-keyword">this</span>.showClose = (options.showClose !== <span class="hljs-literal">undefined</span>) ? options.showClose : <span class="hljs-literal">true</span>;
  },

  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> $header = $(<span class="hljs-string">'&lt;'</span>+<span class="hljs-keyword">this</span>.labelTagName+<span class="hljs-string">'&gt;'</span>, {
      <span class="hljs-string">'id'</span>: <span class="hljs-keyword">this</span>.labelId,
      <span class="hljs-string">'class'</span>: <span class="hljs-string">'modal-title'</span>
    }).text(<span class="hljs-keyword">this</span>.label);

    <span class="hljs-keyword">var</span> $close;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.showClose) {
      $close = $(<span class="hljs-string">'&lt;button&gt;'</span>, {
        <span class="hljs-string">'type'</span>: <span class="hljs-string">'button'</span>,
        <span class="hljs-string">'class'</span>: <span class="hljs-string">'close'</span>,
        <span class="hljs-string">'data-dismiss'</span>: <span class="hljs-string">'modal'</span>,
        <span class="hljs-string">'aria-hidden'</span>: <span class="hljs-string">'true'</span>
      }).html(<span class="hljs-string">'&amp;times;'</span>);
    }
    <span class="hljs-keyword">this</span>.$el.html([$close, $header]);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }

});</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h2 id="basebodyview">BaseBodyView</h2>

            </div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>A simple view representing a minimal modal body</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
BackboneBootstrapModals.BaseBodyView = Backbone.View.extend({
  className: <span class="hljs-string">'modal-body'</span>,
  
  initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(opts)</span> {</span>
    <span class="hljs-keyword">var</span> options = opts || {};
    <span class="hljs-keyword">this</span>.text = options.text;
    <span class="hljs-keyword">this</span>.textTagName = options.textTagName || <span class="hljs-string">'p'</span>;
  },

  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> html;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.text) {
      <span class="hljs-keyword">if</span> (_.isArray(<span class="hljs-keyword">this</span>.text)) {
        html = _.map(<span class="hljs-keyword">this</span>.text, _.bind(<span class="hljs-keyword">this</span>.createTag, <span class="hljs-keyword">this</span>));
      } <span class="hljs-keyword">else</span> {
        html = <span class="hljs-keyword">this</span>.createTag(<span class="hljs-keyword">this</span>.text);
      }
      <span class="hljs-keyword">this</span>.$el.html(html);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },

  createTag: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(text)</span> {</span>
    <span class="hljs-keyword">var</span> $tag = $(<span class="hljs-string">'&lt;'</span>+<span class="hljs-keyword">this</span>.textTagName+<span class="hljs-string">'&gt;'</span>).text(text);
    <span class="hljs-keyword">return</span> $tag;
  }

});</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h2 id="basefooterview">BaseFooterView</h2>

            </div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>A simple view representing a set of modal action buttons</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
BackboneBootstrapModals.BaseFooterView = Backbone.View.extend({
  className: <span class="hljs-string">'modal-footer'</span>,

  initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(opts)</span> {</span>
    <span class="hljs-keyword">var</span> options = opts || {};
    <span class="hljs-keyword">this</span>.buttons = options.buttons || [];
  },

  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createButton</span><span class="hljs-params">(button)</span> {</span>
      <span class="hljs-keyword">var</span> $btn = $(<span class="hljs-string">'&lt;button&gt;'</span>, _.extend({
        <span class="hljs-string">'id'</span>: button.id,
        <span class="hljs-string">'class'</span>: button.className
      }, button.attributes)).text(button.value);
      <span class="hljs-keyword">return</span> $btn;
    }

    <span class="hljs-keyword">this</span>.$el.html(<span class="hljs-keyword">this</span>.buttons.map(createButton));
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }

});</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h2 id="basemodal">BaseModal</h2>

            </div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>The base class all other modals extend.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
BackboneBootstrapModals.BaseModal = Backbone.View.extend({
  className: <span class="hljs-string">'modal'</span>,
  attributes: {
    <span class="hljs-string">'tabindex'</span>: <span class="hljs-string">'-1'</span>,
    <span class="hljs-string">'role'</span>: <span class="hljs-string">'dialog'</span>,
    <span class="hljs-string">'aria-labelledby'</span>: <span class="hljs-string">'myModalLabel'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Handlers for Bootstrap Modal Events: <a href="http://getbootstrap.com/javascript/#modals">http://getbootstrap.com/javascript/#modals</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  bootstrapModalEvents: {
    <span class="hljs-string">'show.bs.modal'</span>: <span class="hljs-string">'onShowBsModal'</span>,
    <span class="hljs-string">'shown.bs.modal'</span>: <span class="hljs-string">'onShownBsModal'</span>,
    <span class="hljs-string">'hide.bs.modal'</span>: <span class="hljs-string">'onHideBsModal'</span>,
    <span class="hljs-string">'hidden.bs.modal'</span>: <span class="hljs-string">'onHiddenBsModal'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>The default views if not overridden or specified in options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  headerView: BackboneBootstrapModals.BaseHeaderView,
  bodyView: BackboneBootstrapModals.BaseBodyView,
  footerView: BackboneBootstrapModals.BaseFooterView,</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>The default modal options if not overridden or specified in options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  modalOptions: {
    backdrop: <span class="hljs-literal">true</span>,
    keyboard: <span class="hljs-literal">true</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>properties to copy from options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  modalProperties: [
    <span class="hljs-string">'modalOptions'</span>,
    <span class="hljs-string">'headerView'</span>,
    <span class="hljs-string">'headerViewOptions'</span>,
    <span class="hljs-string">'bodyView'</span>,
    <span class="hljs-string">'bodyViewOptions'</span>,
    <span class="hljs-string">'footerView'</span>,
    <span class="hljs-string">'footerViewOptions'</span>
  ],

  constructor: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(opts)</span> {</span>
    <span class="hljs-keyword">var</span> options = opts || {};
    <span class="hljs-keyword">this</span>.shown = <span class="hljs-literal">false</span>;
    _.extend(<span class="hljs-keyword">this</span>, _.pick(options, <span class="hljs-keyword">this</span>.modalProperties));
    Backbone.View.prototype.constructor.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
  },

  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Remove any existing views before appending subviews to the layout</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.removeSubviews();
    <span class="hljs-keyword">this</span>.initializeSubviews();

    <span class="hljs-keyword">this</span>.$el.html([
      <span class="hljs-string">'&lt;div class="modal-dialog"&gt;'</span>,
      <span class="hljs-string">'&lt;div class="modal-content"&gt;'</span>,
      <span class="hljs-string">'&lt;/div&gt;'</span>,
      <span class="hljs-string">'&lt;/div&gt;'</span>
    ].join(<span class="hljs-string">''</span>));

    <span class="hljs-keyword">var</span> $modalContent = <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'.modal-content'</span>);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.headerView) {
      $modalContent.append(<span class="hljs-keyword">this</span>.headerViewInstance.render().$el);
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.bodyView) {
      $modalContent.append(<span class="hljs-keyword">this</span>.bodyViewInstance.render().$el);
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.footerView) {
      $modalContent.append(<span class="hljs-keyword">this</span>.footerViewInstance.render().$el);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Allow onRender callback for custom hooks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.onRender) { <span class="hljs-keyword">this</span>.onRender.call(<span class="hljs-keyword">this</span>); }

    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.shown &amp;&amp; <span class="hljs-keyword">this</span>.modalOptions.show !== <span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">this</span>.$el.modal(<span class="hljs-keyword">this</span>.modalOptions);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Initialize views for header, body, and footer sections.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  initializeSubviews: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>.headerViewInstance = <span class="hljs-keyword">this</span>.buildSubview(
      <span class="hljs-keyword">this</span>.getHeaderView(),
      _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'headerViewOptions'</span>),
      <span class="hljs-string">'modal-header'</span>);
    
    <span class="hljs-keyword">this</span>.bodyViewInstance = <span class="hljs-keyword">this</span>.buildSubview(
      <span class="hljs-keyword">this</span>.getBodyView(),
      _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'bodyViewOptions'</span>),
      <span class="hljs-string">'modal-body'</span>);
    
    <span class="hljs-keyword">this</span>.footerViewInstance = <span class="hljs-keyword">this</span>.buildSubview(
      <span class="hljs-keyword">this</span>.getFooterView(),
      _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'footerViewOptions'</span>),
      <span class="hljs-string">'modal-footer'</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Accessors that can be overridden to allow dynamic subview definitions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getHeaderView: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.headerView;
  },

  getBodyView: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.bodyView;
  },

  getFooterView: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.footerView;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Construct view instance with specified options and
additionally propagate model/collection/className attributes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  buildSubview: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(viewConstructor, viewOptions, className)</span> {</span>
    <span class="hljs-keyword">if</span> (!viewConstructor) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"view not specified"</span>);
    }
    
    <span class="hljs-keyword">var</span> options = _.extend({
      model: <span class="hljs-keyword">this</span>.model,
      collection: <span class="hljs-keyword">this</span>.collection,
      className: className
    }, viewOptions);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> viewConstructor(options);
  },

  remove: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>.removeSubviews();
    Backbone.View.prototype.remove.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Allow onClose callback for custom hooks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.onClose) { <span class="hljs-keyword">this</span>.onClose.call(<span class="hljs-keyword">this</span>); }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },

  removeSubviews: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.headerViewInstance) { <span class="hljs-keyword">this</span>.removeSubview(<span class="hljs-keyword">this</span>.headerViewInstance); }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.bodyViewInstance) { <span class="hljs-keyword">this</span>.removeSubview(<span class="hljs-keyword">this</span>.bodyViewInstance);  }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.footerViewInstance) { <span class="hljs-keyword">this</span>.removeSubview(<span class="hljs-keyword">this</span>.footerViewInstance);  }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Attempt to use Marionette’s close first, falling back to Backbone’s remove</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  removeSubview: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(viewInstance)</span> {</span>
    <span class="hljs-keyword">if</span> (Backbone.Marionette &amp;&amp; viewInstance.close) {
        viewInstance.close.apply(viewInstance);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (viewInstance.remove) {
        viewInstance.remove.apply(viewInstance);
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Override default implementation to always include bootstrapModalEvents
without clobbering the default events hash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  delegateEvents: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(events)</span> {</span>
    <span class="hljs-keyword">var</span> combinedEvents = events || _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'events'</span>) || {};

    _.each(<span class="hljs-keyword">this</span>.getAdditionalEventsToDelegate(), <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(eventHash)</span> {</span>
      _.extend(combinedEvents, eventHash);
    });

    Backbone.View.prototype.delegateEvents.call(<span class="hljs-keyword">this</span>, combinedEvents);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Helper method for use in overridden delegateEvents call.
This can be overridden in extended classes to provide additional
events, e.g. ConfirmationModal.confirmationEvents</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getAdditionalEventsToDelegate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> [<span class="hljs-keyword">this</span>.bootstrapModalEvents];
  },

  show: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>.$el.modal(<span class="hljs-string">'show'</span>);
  },

  hide: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>.$el.modal(<span class="hljs-string">'hide'</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>This event fires immediately when the show instance method is called.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  onShowBsModal: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.onShow) { <span class="hljs-keyword">this</span>.onShow.call(<span class="hljs-keyword">this</span>); }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>This event is fired when the modal has been made visible to the user (will wait for CSS transitions to complete). </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  onShownBsModal: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">this</span>.shown = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.onShown) { <span class="hljs-keyword">this</span>.onShown.call(<span class="hljs-keyword">this</span>); }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>This event is fired immediately when the hide instance method has been called.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  onHideBsModal: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.onHide) { <span class="hljs-keyword">this</span>.onHide.call(<span class="hljs-keyword">this</span>); }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>This event is fired when the modal has finished being hidden from the user (will wait for CSS transitions to complete).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  onHiddenBsModal: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>.shown = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>.remove();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.onHidden) { <span class="hljs-keyword">this</span>.onHidden.call(<span class="hljs-keyword">this</span>); }
  },

});</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <h2 id="confirmationmodal">ConfirmationModal</h2>

            </div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>A simple modal for simple confirmation dialogs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
BackboneBootstrapModals.ConfirmationModal = BackboneBootstrapModals.BaseModal.extend({

  confirmationEvents: {
    <span class="hljs-string">'click #confirmation-confirm-btn'</span>: <span class="hljs-string">'onClickConfirm'</span>,
    <span class="hljs-string">'keypress .modal-body'</span>: <span class="hljs-string">'onKeyPress'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Default set of BaseModal options for use as ConfirmationModal</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  headerViewOptions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> {
      label: _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'label'</span>),
      labelId: _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'labelId'</span>),
      labelTagName: _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'labelTagName'</span>),
      showClose: _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'showClose'</span>)
    };
  },

  bodyViewOptions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> {
      text: _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'text'</span>),
      textTagName: _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'textTagName'</span>)
    };
  },

  footerViewOptions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> buttons = [],
        showCancel = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'showCancel'</span>);
    <span class="hljs-keyword">if</span> (showCancel === <span class="hljs-literal">undefined</span> || showCancel === <span class="hljs-literal">true</span>) {
      buttons.push({
        id: <span class="hljs-string">'confirmation-cancel-btn'</span>,
        className: <span class="hljs-string">'btn '</span>+ (_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'cancelClassName'</span>) || <span class="hljs-string">'btn-default'</span>),
        value: (_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'cancelText'</span>) || <span class="hljs-string">'Cancel'</span>),
        attributes: { <span class="hljs-string">'data-dismiss'</span>: <span class="hljs-string">'modal'</span>, <span class="hljs-string">'aria-hidden'</span>: <span class="hljs-string">'true'</span> }
      });
    }
    buttons.push({
      id: <span class="hljs-string">'confirmation-confirm-btn'</span>,
      className: <span class="hljs-string">'btn '</span>+ (_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'confirmClassName'</span>) || <span class="hljs-string">'btn-primary'</span>),
      value: (_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'confirmText'</span>) || <span class="hljs-string">'Confirm'</span>)
    });
    <span class="hljs-keyword">return</span> {
      buttons: buttons
    };
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>properties to copy from options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  confirmationProperties: [
    <span class="hljs-string">'label'</span>,
    <span class="hljs-string">'labelId'</span>,
    <span class="hljs-string">'labelTagName'</span>,
    <span class="hljs-string">'showClose'</span>,
    <span class="hljs-string">'text'</span>,
    <span class="hljs-string">'textTagName'</span>,
    <span class="hljs-string">'confirmText'</span>,
    <span class="hljs-string">'confirmClassName'</span>,
    <span class="hljs-string">'cancelText'</span>,
    <span class="hljs-string">'cancelClassName'</span>,
    <span class="hljs-string">'showCancel'</span>,
    <span class="hljs-string">'onConfirm'</span>
  ],

  initialize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(opts)</span> {</span>
    <span class="hljs-keyword">var</span> options = opts || {};
    _.extend(<span class="hljs-keyword">this</span>, _.pick(options, <span class="hljs-keyword">this</span>.confirmationProperties));
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Override BaseModal hook to add additional default delegated events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getAdditionalEventsToDelegate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> eventHashes = BackboneBootstrapModals.BaseModal.prototype.getAdditionalEventsToDelegate.call(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">return</span> eventHashes.concat(<span class="hljs-keyword">this</span>.confirmationEvents);
  },

  onKeyPress: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>if the user presses the enter key</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (e.which === <span class="hljs-number">13</span>) {
      e.preventDefault();
      <span class="hljs-keyword">this</span>.$(<span class="hljs-string">'#confirmation-confirm-btn'</span>).click();
    }
  },

  onClickConfirm: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
    e.preventDefault();
    e.currentTarget.disabled = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.confirmProgress(e);
  },

  confirmProgress: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>{</span></pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Execute the specified callback if it exists, then hide the modal.
The modal will not be hidden if the callback returns false.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.onConfirm) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.onConfirm.call(<span class="hljs-keyword">this</span>, e) !== <span class="hljs-literal">false</span>) {
            <span class="hljs-keyword">this</span>.hide();
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.hide();
    }
  }
});</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <h2 id="wizardmodal">WizardModal</h2>

            </div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>A simple modal for dialogs with multi-step wizard behavior</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
BackboneBootstrapModals.WizardModal = BackboneBootstrapModals.BaseModal.extend({

  wizardEvents: {
    <span class="hljs-string">'click #confirmation-previous-btn'</span>: <span class="hljs-string">'onClickPrevious'</span>,
    <span class="hljs-string">'click #confirmation-next-btn'</span>: <span class="hljs-string">'onClickNext'</span>,
    <span class="hljs-string">'keypress .modal-body'</span>: <span class="hljs-string">'onKeyPress'</span>
  },

  getBodyView: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(options)</span> {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.currentStep.view;
  },

  headerViewOptions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> {
      label: <span class="hljs-keyword">this</span>.currentStep.label
    };
  },

  bodyViewOptions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.currentStep.viewOptions;
  },

  footerViewOptions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> buttons = <span class="hljs-keyword">this</span>.getButtonsForCurrentStep();
    <span class="hljs-keyword">return</span> {
      buttons: buttons
    };
  },

  initialize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(opts)</span> {</span>
    <span class="hljs-keyword">this</span>.initializeSteps(opts);
    <span class="hljs-keyword">this</span>.setCurrentStep(<span class="hljs-number">0</span>); <span class="hljs-comment">// always start with the first element</span>
  },

  initializeSteps: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(opts)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Override any defined stepGraph with the one in options if present</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (opts.stepGraph) {
      <span class="hljs-keyword">this</span>.stepGraph = opts.stepGraph;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Validate the steps structure</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.stepGraph || !_.isArray(<span class="hljs-keyword">this</span>.stepGraph) || !<span class="hljs-keyword">this</span>.stepGraph.length) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"steps array must be specified and non-empty"</span>);
    }
  },

  setCurrentStep: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
    <span class="hljs-keyword">this</span>.currentStep = <span class="hljs-keyword">this</span>.stepGraph[index];
  },

  getButtonsForCurrentStep: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> previousStepIndex = <span class="hljs-keyword">this</span>.currentStep.previousIndex,
        previousText = <span class="hljs-keyword">this</span>.currentStep.previousText || <span class="hljs-string">'Previous'</span>,
        previousClassName = <span class="hljs-keyword">this</span>.currentStep.previousClassName || <span class="hljs-string">'btn-default'</span>,
        nextStepIndex = <span class="hljs-keyword">this</span>.currentStep.nextIndex,
        nextText = <span class="hljs-keyword">this</span>.currentStep.nextText || <span class="hljs-string">'Next'</span>,
        nextClassName = <span class="hljs-keyword">this</span>.currentStep.nextClassName || <span class="hljs-string">'btn-primary'</span>,
        buttons = [];
    <span class="hljs-keyword">if</span> (previousStepIndex !== <span class="hljs-literal">undefined</span>) {
      buttons.push({ id: <span class="hljs-string">'confirmation-previous-btn'</span>, className: <span class="hljs-string">'btn '</span>+previousClassName, value: previousText });
    }
    buttons.push({ id: <span class="hljs-string">'confirmation-next-btn'</span>, className: <span class="hljs-string">'btn '</span>+nextClassName, value: nextText });
    <span class="hljs-keyword">return</span> buttons;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Override BaseModal hook to add additional default delegated events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getAdditionalEventsToDelegate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> eventHashes = BackboneBootstrapModals.BaseModal.prototype.getAdditionalEventsToDelegate.call(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">return</span> eventHashes.concat(<span class="hljs-keyword">this</span>.wizardEvents);
  },

  renderPreviousStep: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>.setCurrentStep(<span class="hljs-keyword">this</span>.currentStep.previousIndex);
    <span class="hljs-keyword">this</span>.render();
  },

  renderNextStep: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> nextStepIndex = <span class="hljs-keyword">this</span>.currentStep.nextIndex;
    <span class="hljs-keyword">if</span> (nextStepIndex !== <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">this</span>.setCurrentStep(nextStepIndex);
      <span class="hljs-keyword">this</span>.render();
    } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>If no more steps, hide the dialog</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.hide();
    }
  },

  onClickPrevious: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
    e.preventDefault();
    e.currentTarget.disabled = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.renderPreviousStep();
  },

  onKeyPress: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>if the user presses the enter key</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (e.which === <span class="hljs-number">13</span>) {
      e.preventDefault();
      <span class="hljs-keyword">this</span>.$(<span class="hljs-string">'#confirmation-next-btn'</span>).click();
    }
  },

  onClickNext: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
    e.preventDefault();
    e.currentTarget.disabled = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.goForward(e);
  },

  goForward: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Execute the specified callback if it exists, then proceed.
The modal will not proceed if the callback returns false.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.currentStep.onNext) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.currentStep.onNext.call(<span class="hljs-keyword">this</span>, e) === <span class="hljs-literal">false</span>) {
            <span class="hljs-keyword">return</span>;
        }
    }

    <span class="hljs-keyword">this</span>.renderNextStep();
  }
});


  <span class="hljs-keyword">return</span> BackboneBootstrapModals;
}));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
